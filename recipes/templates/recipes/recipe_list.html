<h1>My Recipes</h1>

<div style="margin-bottom: 20px">
  <a href="{% url 'recipe_create' %}" style="margin-right: 15px">
    âž• Create a Recipe Manually
  </a>
  <a href="{% url 'ai_generate_recipe' %}"> ðŸ¤– Generate a Recipe with AI </a>
</div>

<hr />

<h2>Search Recipes</h2>
<form method="get" style="margin-bottom: 1em">
  <input
    type="text"
    name="q"
    placeholder="Search recipes..."
    value="{{ query }}"
  />
  <button type="submit">Search</button>
  {% if query %}
  <a href="{% url 'recipe_list' %}" style="margin-left: 10px">Reset</a>
  {% endif %}
</form>

<h2>Filter by Tag</h2>
<div style="margin-bottom: 1em">
  <a href="{% url 'recipe_list' %}">All</a>
  {% for tag in tags %} {% if tag.id == selected_tag %}
  <strong>{{ tag.name }}</strong>
  {% else %}
  <a href="?tag={{ tag.id }}{% if query %}&q={{ query }}{% endif %}"
    >{{ tag.name }}</a
  >
  {% endif %} {% if not forloop.last %} | {% endif %} {% endfor %}
</div>

<h2>Saved Recipes</h2>
<ul>
  {% for recipe in recipes %}
  <li>
    <a href="{% url 'recipe_detail' recipe.pk %}"> {{ recipe.title }} </a>
  </li>
  {% empty %}
  <li>No recipes yet.</li>
  {% endfor %}
</ul>

<h2>Upcoming Meal Plan</h2>

{% if meal_plans %}
<ul>
  {% for plan in meal_plans %}
  <li>
    {{ plan.date }} - {{ plan.get_meal_type_display }}:
    <a href="{% url 'recipe_detail' plan.recipe.pk %}">
      {{ plan.recipe.title }}
    </a>
  </li>
  {% endfor %}
</ul>
{% else %}
<p>No meals planned yet.</p>
{% endif %}

<p>
  <a href="{% url 'meal_plan_create' %}">âž• Plan a Meal</a>
</p>
