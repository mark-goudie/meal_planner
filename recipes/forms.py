from django import forms
from .models import Recipe, FamilyPreference
from django.contrib.auth.forms import UserCreationForm
from django.contrib.auth.models import User

class RecipeForm(forms.ModelForm):
    class Meta:
        model = Recipe
        fields = [
            'title',
            'author',
            'description',
            'ingredients',
            'steps',
            'notes',
            'is_ai_generated',
            'tags'
        ]
        widgets = {
            'ingredients': forms.Textarea(attrs={'rows': 4, 'cols': 40}),
            'steps': forms.Textarea(attrs={'rows': 4, 'cols': 40}),
            'notes': forms.Textarea(attrs={'rows': 2, 'cols': 40}),
            'tags': forms.CheckboxSelectMultiple()
        }
        labels = {
            'title': 'Recipe Title',
            'author': 'Author Name',
            'description': 'Description',
            'ingredients': 'Ingredients',
            'steps': 'Cooking Steps',
            'notes': 'Additional Notes',
            'is_ai_generated': 'Is AI Generated?',
        }
        help_texts = {
            'title': 'Enter the title of the recipe.',
            'author': 'Enter the name of the author (optional).',
            'description': 'Provide a brief description of the recipe.',
            'ingredients': 'List all ingredients required for the recipe.',
            'steps': 'Describe the steps to prepare the recipe.',
            'notes': 'Any additional notes or tips for this recipe.',
            'is_ai_generated': 'Check if this recipe was generated by AI.',
        }
        error_messages = {
            'title': {
                'max_length': "This title is too long.",
            },
            'ingredients': {
                'required': "Ingredients are required.",
            },
            'steps': {
                'required': "Cooking steps are required.",
            },
        }

from .models import MealPlan

class MealPlanForm(forms.ModelForm):
    class Meta:
        model = MealPlan
        fields = ['date', 'meal_type', 'recipe']
        widgets = {
            'date': forms.DateInput(attrs={'type': 'date'}),
        }

from .models import FamilyPreference

class FamilyPreferenceForm(forms.ModelForm):
    class Meta:
        model = FamilyPreference
        fields = ['family_member', 'preference']
        widgets = {
            'family_member': forms.TextInput(attrs={'placeholder': 'e.g. Nina'}),
            'preference': forms.Select
        }
        labels = {
            'family_member': 'Family Member',
            'preference': 'Preference Level',
        }
        help_texts = {
            'family_member': 'Enter the name of the family member.',
            'preference': 'Select the preference level for this recipe.',
        }
        error_messages = {
            'family_member': {
                'required': "Family member name is required.",
            },
            'preference': {
                'required': "Preference level is required.",
            },
        }

class CustomUserCreationForm(UserCreationForm):
    email = forms.EmailField(required=True, widget=forms.EmailInput(attrs={'class': 'form-control'}))

    class Meta:
        model = User
        fields = ("username", "email", "password1", "password2")


